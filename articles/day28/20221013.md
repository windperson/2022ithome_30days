# Orleans Grain RPC呼叫的三事：Request Context, One-way request, Stateless Worker 

Orleans在開發(dev)Grain Method相關還有一些特殊的API，這篇文章就來介紹一下：**Request Context**, **One-way request**, **Stateless Worker** 的用法。

## Request Context

Request Context 類似 ASP.NET MVC的 ViewData Dictionary，提供一個穿越RPC呼叫方法的資料傳遞管道，可以在呼叫RPC方法之前設定資料，然後在運算進入呼叫方法實作的時候，就可以取得這些資料。

Request Context的設定方法為呼叫其靜態方法 [`RequestContext.Set()`](https://learn.microsoft.com/en-us/dotnet/api/orleans.runtime.requestcontext.set)，此呼叫可在Grain Method實作中進行，也可以在一開始要啟始RPC方法呼叫前的Client端執行。

而讀取資料的方法為呼叫其靜態方法 [`RequestContext.Get()`](https://learn.microsoft.com/en-us/dotnet/api/orleans.runtime.requestcontext.get)，此呼叫可在Call Filter和Grain Method實作中進行。

## One-way request

有些Grain的RPC方法如果只是要Grain去做事，不需要回傳結果，那就可以使用加掛 [`[OneWay]`](https://learn.microsoft.com/en-us/dotnet/api/orleans.concurrency.onewayattribute) 屬性的方式來定義Grain Method：
```csharp
using Orleans.Concurrency;

public interface IDemoOneWayGrain : IGrainWithGuidKey
{
    [OneWay]
    Task LogSomething(string message);
}
```
One-way Request的方法，回傳值只能為Task或ValueTask，不能是有回傳值的泛型`Task<T>` / `ValueTask<T>`。

One-way Request的方法假如拋出例外，不會回傳至呼叫端。但其Incoming & Outgoing Call Filter還是會被執行。


## Stateless Workder
